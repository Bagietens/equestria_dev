ZAR_infrastructure_projects = {
	IF = {
		limit = {
			infrastructure < 4
		}
		add_building_construction = {
			type = infrastructure
			level = 2
			instant_build = yes
		}
	}
}

refresh_compliance_values = {
	set_variable = { ZAR.agz_compliance = 747.ZAR_compliance }
	set_variable = { ZAR.zin_compliance = 748.ZAR_compliance }
	set_variable = { ZAR.zin_negative_compliance = 748.ZAR_compliance }
	multiply_variable = { ZAR.zin_negative_compliance = -1 }
	set_variable = { ZAR.zgw_compliance = 754.ZAR_compliance }
	set_variable = { ZAR.zaj_compliance = 878.ZAR_compliance }
	set_variable = { ZAR.zaj_negative_compliance = 878.ZAR_compliance }
	multiply_variable = { ZAR.zaj_negative_compliance = -0.25 }
	set_variable = { ZAR.shi_compliance = 755.ZAR_compliance }
	set_variable = { ZAR.sen_compliance = 746.ZAR_compliance }
	set_variable = { ZAR.men_compliance = 730.ZAR_compliance }
	set_variable = { ZAR.zam_compliance = 756.ZAR_compliance }

}

## THE GOOD OL WALL O' SCRIPTS

## AGZHAT


ZAR_add_small_support = {
	set_temp_variable = { temp_agz_comp = 0.025 }
	round_temp_variable = temp_agz_comp
	add_to_variable = { ZAR_compliance = temp_agz_comp }
	if = {
		limit = {
			ZAR = {
				has_country_flag = ZAR_choose_martial
			}
		}
		custom_effect_tooltip = ZAR_small_boost_war_tt
	}
	else = {
		custom_effect_tooltip = ZAR_small_boost_tt
	}
	recalculate_variable_for_modifier = yes
}

ZAR_decrease_small_support = {
	set_temp_variable = { temp_agz_comp = 0.025 }
	round_temp_variable = temp_agz_comp
	subtract_from_variable = { ZAR_compliance = temp_agz_comp }
	if = {
		limit = {
			ZAR = {
				has_country_flag = ZAR_choose_martial
			}
		}
		custom_effect_tooltip = ZAR_small_penalty_war_tt
	}
	else = {
		custom_effect_tooltip = ZAR_small_penalty_tt
	}
	recalculate_variable_for_modifier = yes
}

ZAR_add_medium_support = {
	set_temp_variable = { temp_agz_comp = 0.025 }
	round_temp_variable = temp_agz_comp
	add_to_variable = { ZAR_compliance = temp_agz_comp }
	if = {
		limit = {
			ZAR = {
				has_country_flag = ZAR_choose_martial
			}
		}
		custom_effect_tooltip = ZAR_medium_boost_war_tt
	}
	else = {
		custom_effect_tooltip = ZAR_medium_boost_tt
	}
	recalculate_variable_for_modifier = yes
}

ZAR_decrease_medium_support = {
	set_temp_variable = { temp_agz_comp = 0.055 }
	round_temp_variable = temp_agz_comp
	subtract_from_variable = { ZAR_compliance = temp_agz_comp }
	if = {
		limit = {
			ZAR = {
				has_country_flag = ZAR_choose_martial
			}
		}
		custom_effect_tooltip = ZAR_medium_penalty_war_tt
	}
	else = {
		custom_effect_tooltip = ZAR_medium_penalty_tt
	}
	recalculate_variable_for_modifier = yes
}

ZAR_add_large_support = {
	set_temp_variable = { temp_agz_comp = 0.1 }
	round_temp_variable = temp_agz_comp
	add_to_variable = { ZAR_compliance = temp_agz_comp }
	if = {
		limit = {
			ZAR = {
				has_country_flag = ZAR_choose_martial
			}
		}
		custom_effect_tooltip = ZAR_large_boost_war_tt
	}
	else = {
		custom_effect_tooltip = ZAR_large_boost_tt
	}
	recalculate_variable_for_modifier = yes
}

ZAR_decrease_large_support = {
	set_temp_variable = { temp_agz_comp = 0.1 }
	round_temp_variable = temp_agz_comp
	subtract_from_variable = { ZAR_compliance = temp_agz_comp }
	if = {
		limit = {
			ZAR = {
				has_country_flag = ZAR_choose_martial
			}
		}
		custom_effect_tooltip = ZAR_large_penalty_war_tt
	}
	else = {
		custom_effect_tooltip = ZAR_large_penalty_tt
	}
	recalculate_variable_for_modifier = yes
}

## ZINDER

recalculate_variable_for_modifier = {
	set_variable = { ZAR_compliance_negative = ZAR_compliance }
	multiply_variable = { ZAR_compliance_negative = -1 }
}


## ZAWAGH


## ZAJHARI



## SENMARE


## MENZAKA



##ZAMFARA


##SHIZRA


ZAR_corruption_reduction_effect = {
	if = {
		limit = {
			has_idea = ZAR_corruption_1
		}
		swap_ideas = {
			remove_idea = ZAR_corruption_1
			add_idea = ZAR_corruption_2
		}
	}
	else_if = {
		limit = {
			has_idea = ZAR_corruption_2
		}
		swap_ideas = {
			remove_idea = ZAR_corruption_2
			add_idea = ZAR_corruption_3
		}
	}
	else_if = {
		limit = {
			has_idea = ZAR_corruption_3
		}
		swap_ideas = {
			remove_idea = ZAR_corruption_3
			add_idea = ZAR_corruption_4
		}
	}
	else_if = {
		limit = {
			has_idea = ZAR_corruption_4
		}
		swap_ideas = {
			remove_idea = ZAR_corruption_4
			add_idea = ZAR_corruption_5
		}
	}
	else_if = {
		limit = {
			has_idea = ZAR_corruption_5
		}
		remove_ideas = ZAR_corruption_5
	}
}


ZAR_imazeeb_discontent_reduction_effect = {
	if = {
		limit = {
			has_idea = ZAR_imazeeb_discontent_1
		}
		swap_ideas = {
			remove_idea = ZAR_imazeeb_discontent_1
			add_idea = ZAR_imazeeb_discontent_2
		}
	}
	else_if = {
		limit = {
			has_idea = ZAR_imazeeb_discontent_2
		}
		swap_ideas = {
			remove_idea = ZAR_imazeeb_discontent_2
			add_idea = ZAR_imazeeb_discontent_3
		}
	}
	else_if = {
		limit = {
			has_idea = ZAR_imazeeb_discontent_3
		}
		swap_ideas = {
			remove_idea = ZAR_imazeeb_discontent_3
			add_idea = ZAR_imazeeb_discontent_4
		}
	}
	else_if = {
		limit = {
			has_idea = ZAR_imazeeb_discontent_4
		}
		swap_ideas = {
			remove_idea = ZAR_imazeeb_discontent_4
			add_idea = ZAR_imazeeb_discontent_5
		}
	}
	else_if = {
		limit = {
			has_idea = ZAR_imazeeb_discontent_5
		}
		remove_ideas = ZAR_imazeeb_discontent_5
	}
}

ZAR_save_starting_core_NZ = {
	for_each_scope_loop = {
		array = CTH.owned_states
		if = {
			limit = {
				is_core_of = CTH
			}
			add_to_array = {
				array = ZAR.ZAR_CTH_states
				value = THIS
			}
		}
	}
	for_each_scope_loop = {
		array = HIP.owned_states
		if = {
			limit = {
				is_core_of = ZUM
			}
			add_to_array = {
				array = ZAR.ZAR_ZUM_states
				value = THIS
			}
		}
	}
		for_each_scope_loop = {
			array = WAR.owned_states
		add_to_array = {
			array = ZAR.ZAR_WAR_states
			value = THIS
		}
	}
	for_each_scope_loop = {
		array = BAT.owned_states
		add_to_array = {
			array = ZAR.ZAR_BAT_states
			value = THIS
		}
	}
	for_each_scope_loop = {
		array = CGI.owned_states
		if = {
			limit = {
				is_core_of = CGI
			}
			add_to_array = {
				array = ZAR.ZAR_CGI_states
				value = THIS
			}
		}
	}
	for_each_scope_loop = {
		array = CGI.owned_states
		if = {
			limit = {
				is_core_of = CDR
			}
			add_to_array = {
				array = ZAR.ZAR_CDR_states
				value = THIS
			}
		}
	}
	for_each_scope_loop = {
		array = ZAR.owned_states
		if = {
			limit = {
				is_core_of = ZAR
			}
			add_to_array = {
				array = ZAR.ZAR_CORE_states
				value = THIS
			}
		}
	}
	for_each_scope_loop = {
		array = TBK.owned_states
		if = {
			limit = {
				is_core_of = TBK
			}
			add_to_array = {
				array = ZAR.ZAR_CORE_states
				value = THIS
			}
		}
	}

	set_variable = { ZAR_ideology_tracker = 0}
}

ZAR_worm_coring_purge = {
	add_core_of = ZAR
	set_building_level = {
		type = arms_factory
		level = 0
		instant_build = yes
	}
	set_building_level = {
		type = industrial_complex
		level = 0
		instant_build = yes
	}
	set_building_level = {
		type = dockyard
		level = 0
		instant_build = yes
	}
	set_building_level = {
		type = anti_air_building
		level = 0
		instant_build = yes
	}
	set_building_level = {
		type = synthetic_refinery
		level = 0
		instant_build = yes
	}
	set_building_level = {
		type = fuel_silo
		level = 0
		instant_build = yes
	}
	set_building_level = {
		type = radar_station
		level = 0
		instant_build = yes
	}
	set_building_level = {
		type = nuclear_reactor
		level = 0
		instant_build = yes
	}
	set_building_level = {
		type = rocket_site
		level = 0
		instant_build = yes
	}
	set_building_level = {
		type = air_base
		level = 0
		instant_build = yes
	}
	set_building_level = {
		type = bunker
		level = 0
		instant_build = yes
		province = {
			all_provinces = yes
		}
	}
	set_building_level = {
		type = coastal_bunker
		level = 0
		instant_build = yes
		province = {
			all_provinces = yes
		}
	}
	add_dynamic_modifier = {
		modifier = ZAR_worm_devastation
	}
}


ZAR_add_coring_federation_spirit_scripted_effect = {
	if = {
		limit = { 
			NOT = { 
				has_dynamic_modifier = {
					modifier = ZAR_federal_integration 
				}
			} 
		}
		set_variable = { ZAR_federal_integration_construction_speed = 0 }
		set_variable = { ZAR_federal_integration_building_slot_factors = 0 }
		set_variable = { ZAR_federal_integration_conscription_factor = 0 }
		set_variable = { ZAR_federal_integration_weekly_manpower = 0 }
		add_dynamic_modifier = { modifier = ZAR_federal_integration } 
	}
	else = {
		custom_effect_tooltip = ZAR_add_coring_federation_spirit_scripted_effect_modify_tt
	}
}
ZAR_add_coring_empire_spirit_scripted_effect = {
	if = {
		limit = { 
			NOT = { 
				has_dynamic_modifier = {
					modifier = ZAR_hegemons_benefits 
				}
			} 
		}
		hidden_effect = {
			set_variable = { ZAR_hegemons_benefits_conscription_factor = 0 }
			set_variable = { ZAR_hegemons_benefits_political_power_gain = 0 }
			set_variable = { ZAR_hegemons_benefits_consumer_goods_factor = 0 }
			set_variable = { ZAR_hegemons_benefits_industrial_capacity_factory = 0 }
			add_dynamic_modifier = { modifier = ZAR_hegemons_benefits } 

			set_variable = { ZAR_zarantian_core_building_slot_factors = 0 }
			set_variable = { ZAR_zarantian_core_construction_speed = 0 }

			every_owned_state = {
				limit = {
					is_core_of = ZAR
				}	
				add_dynamic_modifier = {
					modifier = ZAR_zarantian_core
				}
			}
		}
		ZAR = { set_country_flag = ZAR_Empire_coring_added_modifiers }
	}
}


ZAR_transfer_stolen_pop = {
	if = {
		limit = {
			check_variable = { ZAR_indentured_servant_var < 10000 }
		}
		random_owned_state = {
			limit = {
				is_in_array = {
					array = ZAR.ZAR_CORE_states
					value = THIS
				}
			}
			add_manpower = var:ZAR.ZAR_indentured_servant_var
		}
		set_variable = { ZAR_indentured_servant_var = 0 }
	}
	else = {
		random_owned_state = {
			limit = {
				is_in_array = {
					array = ZAR.ZAR_CORE_states
					value = THIS
				}
			}
			add_manpower = 10000
		}
		subtract_from_variable = { ZAR_indentured_servant_var = 10000 }
	}

	if = {
		limit = {
			NOT = { check_variable = { ZAR_indentured_servant_var = 0 } }
		}
		ZAR_transfer_stolen_pop = yes
	}
}